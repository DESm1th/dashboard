<br>

<div class="panel panel-info" title="Study Details retrieved from the dataset_description.json file">
  <div class="panel-heading" data-toggle="collapse" data-target="#studyInfo">
    <h3 class="panel-title chevron-toggle">Study Details</h3>
  </div>
  <div class="panel-body collapse in" id="studyInfo">
    {% if study.primary_contact %}
      <div>Primary Investigator: {{ study.primary_contact.name }}</div>
    {% endif %}
  </div>
</div>

<div class="panel panel-info" title="Updates the README file stored with the study data">
  <div class="panel-heading" data-toggle="collapse" data-target="#studyReadme">
    <h3 class="panel-title chevron-toggle">Study README</h3>
  </div>
  <div class="panel-body collapse in" id="studyReadme">
    <button type="button" class="btn btn-default" aria-label="Edit readme" id="edit_readme">
      <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Click to edit text
    </button>

    <form action="" method="post" name="readme">
      {{ form.hidden_tag() }}
      {{ form.readme_txt }}
      <input type="submit" value="Update" id="btn_update">
    </form>
  </div>
</div>


<script type=text/javascript async>
$(function(){
  var simplemde = new SimpleMDE({ element: $("#readme_editor")[0],
                                  autosave:{ enabled: false},
                                  status: false
                                  });
  simplemde.togglePreview();
  $(".editor-toolbar").hide();
  $("#btn_update").hide();

  $("#edit_readme").click(function(){
    if (simplemde.isPreviewActive()){
      //currently in preview mode, lets open for editing
      simplemde.togglePreview();
      $(".editor-toolbar").show();
      $("#btn_update").show();
    } else {
      //currently in edit mode, lets switch to preview
      simplemde.togglePreview();
      $(".editor-toolbar").hide();
      $("#btn_update").hide();
  }
  });
});
</script>
